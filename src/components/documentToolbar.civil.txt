'
 .toolbarDirectory {
  background-color: #202020;
  border: 1px solid #606060;
  border-bottom: none;
  box-shadow: 0 0 20px #80808080;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  max-height: calc(100vh - 76px);
  min-width: 240px;
  opacity: 0;
  overflow: visible;
  position: absolute;
  top: 37px;
  transition: opacity 0s ease;
  width: auto;
 }
 
 .toolbarDirectory.visible {
  opacity: 1;
  transition: opacity 0.2s ease;
 }
 
 .toolbarDirectory > .menu {
  flex-grow: 1;
  overflow: auto;
 }
' @ addStyle !

# length of time (ms) to wait before closing toolbar directory
350 >> closeToolbarDirectoryDelay

# is toolbar directory allowed to close?
1 >> allowCloseToolbarDirectory

.. $-- closeToolbarDirectoryTimeout @ -- clearTimeout !
<< >> cancelCloseToolbarDirectory

.. 0 >> -- allowCloseToolbarDirectory
<< >> preventCloseToolbarDirectory

.. $-- directoryContainer remove !
<< >> closeToolbarDirectoryImmediately

.. .. $-- -- closeToolbarDirectoryImmediately , $-- -- closeToolbarDirectoryDelay \
   @ -- -- setTimeout !
.. .. >> -- -- closeToolbarDirectoryTimeout
.. $-- allowCloseToolbarDirectory = 1 ?
<< >> closeToolbarDirectory

# close toolbar directory on route
hashchange , $closeToolbarDirectoryImmediately @ addEventListener !

div @ document createElement ! >> directoryContainer
toolbarDirectory @ directoryContainer classList add !
mouseenter , $cancelCloseToolbarDirectory @ directoryContainer addEventListener !
contextmenu , $preventCloseToolbarDirectory @ directoryContainer addEventListener !
mouseleave , $closeToolbarDirectory @ directoryContainer addEventListener !

.. 1 >> allowCloseToolbarDirectory
.. $-- cancelCloseToolbarDirectory !
.. visible @ -- directoryContainer classList remove !
.. '' >> -- directoryContainer textContent
.. $-- directoryContainer @ -- document body appendChild !
.. $segmentButton getBoundingClientRect ! >> buttonRect
.. '$buttonRect\ left\ -1 px' >> -- directoryContainer style left
.. '$buttonRect\ width\ +1 px' >> -- directoryContainer style minWidth
.. '$dir /' @ Documents getByDir ! >> docs
.. '' >> -- directoryContainer textContent
.. $-- directoryContainer , $dir , $Documents , $docs , $saveDocument , $renameDocument , \
    $components @ components documentsList !
.. visible @ -- directoryContainer classList add !
<< dir segmentButton Documents saveDocument renameDocument components >> openToolbarDirectory

.. '' >> toolbar textContent
.. '/' @ dir split ! >> dirSegments
.. $dirSegments pop !
.. $-- Array ! >> linkSegments
.. .. a @ -- -- document createElement ! >> segmentButton
.. .. $segment @ -- linkSegments push !
.. .. '/' @ -- linkSegments join ! >> segmentFullPath
.. .. $segmentButton @ -- toolbar appendChild !
.. .. '#$segmentFullPath' >> segmentButton href
.. .. $segment @ -- -- decodeURIComponent ! >> segmentButton textContent
.. .. button @ segmentButton classList add !
.. .. .. $-- segmentFullPath , $-- segmentButton , $-- -- Documents , \
          $-- -- saveDocument , $-- -- renameDocument , $-- -- components \
          @ -- -- -- openToolbarDirectory !
.. .. << >> segmentLinkButtonHover
.. .. mouseenter , $segmentLinkButtonHover @ segmentButton addEventListener !
.. .. mouseleave , $-- -- closeToolbarDirectory @ segmentButton addEventListener !
.. << segment :: dirSegments !
..
.. .. 'Home - Civil' >> -- -- document title
.. $dir = '' ?
..
.. .. $-- dirSegments $--\ dirSegments\ length\ -1 @ -- -- decodeURIComponent ! >> title
.. .. $-- dir @ -- -- decodeURIComponent ! >> readableDir
.. .. '$title  - Civil - $readableDir' >> -- -- document title
.. $dir ~= '' ?
<< dir toolbar Documents saveDocument renameDocument components
